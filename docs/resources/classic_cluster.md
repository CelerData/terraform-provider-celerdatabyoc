---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "celerdatabyoc_classic_cluster Resource - terraform-provider-celerdatabyoc"
subcategory: "Deployment"
description: |-
  
---

~> The resource's API may change in subsequent versions to simplify user experience.

Deploys a classic CelerData cluster on AWS EC2 instances or on Azure virtual machines.

If you are setting up your first cluster and it consists of one FE node and one BE node, both with instance types that offer up to 4 CPU cores and 16 GB RAM, then the cluster will be automatically created as a [Free Developer Tier](https://docs.celerdata.com/byoc/main/get_started/free_developer_tier) cluster. This allows you to explore and experience the features of CelerData Cloud BYOC at a minimal cost.

The implementation of this resource is part of the whole cluster deployment procedure and depends on the implementation of a data credential, a deployment credential, and a network configuration. For detailed procedures of cluster deployments on AWS and Azure, see [Provision CelerData Cloud BYOC on AWS](../guides/aws_deployment_guide.md) and [Provision CelerData Cloud BYOC on Azure](../guides/azure_deployment_guide.md).

## Supported Instance Types

For information about the instance types supported by CelerData, see [Supported instance types](https://docs.celerdata.com/byoc/main/get_started/create_cluster/supported_instance_type).

## Example Usage

```terraform
resource "celerdatabyoc_classic_cluster" "classic_cluster_1" {
  cluster_name = "<cluster_name>"
  fe_instance_type = "<fe_node_instance_type>"
  fe_node_count = 1
  deployment_credential_id = <deployment_credential_resource_ID>
  data_credential_id = <data_credential_resource_ID>
  network_id = <network_configuration_resource_ID>
  be_instance_type = "<be_node_instance_type>"
  be_node_count = 1
  be_disk_number = 2
  be_disk_per_size = 100
  default_admin_password = "<SQL_user_initial_password>"

  expected_cluster_state = "{Suspended | Running}"
  ldap_ssl_certs = [
    "<ssl_cert_s3_path>"
  ]
  resource_tags = {
    celerdata = "<tag_name>"
  }
  csp = "{aws | azure}"
  region = "<cloud_provider_region>"

  init_scripts {
      logs_dir    = "<log_s3_path>"
      script_path = "<script_s3_path>"
  }
  run_scripts_parallel = false
  query_port = 9030
}
```

## Argument Reference

~> This section explains only the arguments of the `celerdatabyoc_classic_cluster` resource. For the explanation of arguments of other resources, see the corresponding resource topics.

This resource contains the following required arguments and optional arguments:

**Required:**

- `cluster_name`: (Forces new resource) The desired name for the cluster.
- `fe_instance_type`: The instance type for FE nodes in the cluster. Select an FE instance type from the table "[Supported Instance Types](#supported-instance-types)".
- `deployment_credential_id`: (Forces new resource) The ID of the deployment credential.
  - If you deploy the cluster on AWS, set this argument to `celerdatabyoc_aws_deployment_role_credential.<resource_name>.id` and replace `<resource_name>` with the name of the `celerdatabyoc_aws_deployment_role_credential` resource.
  - If you deploy the cluster on Azure, set this argument to `celerdatabyoc_azure_deployment_credential.<resource_name>.id` and replace `<resource_name>` with the name of the `celerdatabyoc_azure_deployment_credential` resource.
- `data_credential_id`: (Forces new resource) The ID of the data credential.
  - If you deploy the cluster on AWS, set this argument to `celerdatabyoc_aws_data_credential.<resource_name>.id` and replace `<resource_name>` with the name of the `celerdatabyoc_aws_data_credential` resource.
  - If you deploy the cluster on Azure, set this argument to `celerdatabyoc_azure_data_credential.<resource_name>.id` and replace `<resource_name>` with the name of the `celerdatabyoc_azure_data_credential` resource.
- `network_id`: (Forces new resource) The ID of the network configuration.
  - If you deploy the cluster on AWS, set this argument to `celerdatabyoc_aws_network.<resource_name>.id` and replace `<resource_name>` with the name of the `celerdatabyoc_aws_network` resource.
  - If you deploy the cluster on Azure, set this argument to `celerdatabyoc_azure_network.<resource_name>.id` and replace `<resource_name>` with the name of the `celerdatabyoc_azure_network` resource.
- `be_instance_type`: The instance type for BE nodes in the cluster. Select a BE instance type from the table "[Supported Instance Types](#supported-instance-types)".
- `default_admin_password`: The initial password of the cluster `admin` user.
- `expected_cluster_state`: When creating a cluster, you need to declare the status of the cluster you are creating. Cluster states are categorized as `Suspended` and `Running`. If you want the cluster to start after provisioning, set this argument to `Running`. If you do not do so, the cluster will be suspended after provisioning.
- `csp`: The cloud service provider of the cluster.
  - If you deploy the cluster on AWS, set this argument to `aws`.
  - If you deploy the cluster on Azure, set this argument to `azure`.
- `region`: The ID of the cloud provider region to which the network hosting the cluster belongs. See [Supported cloud platforms and regions](https://docs.celerdata.com/byoc/main/get_started/cloud_platforms_and_regions).

**Optional:**

- `fe_node_count`: The number of FE nodes in the cluster. Valid values: `1`, `3`, and `5`. Default value: `1`.
- `be_node_count`: The number of BE nodes in the cluster. Valid values: any non-zero positive integer. Default value: `3`.
- `be_disk_number`: (Forces new resource) The maximum number of disks that are allowed for each BE. Valid values: [1,24]. Default value: `2`.
- `be_disk_per_size`: The size per disk for each BE. Unit: GB. Maximum value: `16000`. Default value: `100`. You can only increase the value of this parameter, and the time interval between two value changes must be greater than 6 hours.

~> You can use the `be_disk_number` and `be_disk_per_size` arguments to specify the disk space. The total disk space provisioned to a cluster is equal to `be_disk_number` * `be_disk_per_size`.

- `ldap_ssl_certs`: The path in the AWS S3 bucket that stores the LDAP SSL certificates. Multiple paths must be separated by commas (,). CelerData supports using LDAP over SSL by uploading the LDAP SSL certificates from S3. To allow CelerData to successfully fetch the certificates, you must grant the `ListObject` and `GetObject` permissions to CelerData. To delete the certificates uploaded, you only need to remove this argument.

~> You can only upload or delete LDAP SSL certificates while the cluster's `expected_cluster_state` is set to `Running`.

- `resource_tags`: The tags to be attached to the cluster.
- `init_scripts`: The configuration block to specify the paths to which scripts and script execution results are stored. The maximum number of executable scripts is 20. For information about the formats supported by these arguments, see `scripts.logs_dir` and `scripts.script_path` in [Run scripts](https://docs.celerdata.com/byoc/main/run_scripts).
  - `logs_dir`: (Forces new resource) The path in the AWS S3 bucket to which script execution results are stored. This S3 bucket can be the same as or different from the S3 bucket you specify in the `celerdatabyoc_aws_data_credential` resource.
  - `script_path`: (Forces new resource) The path in the AWS S3 bucket that stores the scripts to run via Terraform. This S3 bucket must be the one you specify in the `celerdatabyoc_aws_data_credential` resource.
- `run_scripts_parallel`: Whether to execute the scripts in parallel. Valid values: `true` and `false`. Default value: `false`.
- `run_scripts_timeout`: The amount of time after which the script execution times out. Unit: Seconds. Default: `3600` (1 hour). The maximum value of this item is `21600` (6 hours).
- `query_port`: The query port, which must be within the range of 1-65535 excluding 443. The default query port is port 9030. Note that this argument can be specified only at cluster deployment, and cannot be modified once it is set.
- `idle_suspend_interval`: The amount of time (in minutes) during which the cluster can stay idle. After the specified time period elapses, the cluster will be automatically suspended. The Auto Suspend feature is disabled by default, and therefore it is not included in the configuration example above. To enable the Auto Suspend feature, set this argument to an integer within the range of 15-999999. To disable this feature again, remove this argument from your Terraform configuration.

## See Also

- [AWS IAM](https://us-east-1.console.aws.amazon.com/iamv2/home?region=us-east-1#/policies)
- [Manage data credentials for AWS](https://docs.celerdata.com/byoc/main/cloud_settings/aws_cloud_settings/manage_aws_data_credentials)
- [Manage deployment credentials for AWS](https://docs.celerdata.com/byoc/main/cloud_settings/aws_cloud_settings/manage_aws_deployment_credentials)
- [Manage network configurations for AWS](https://docs.celerdata.com/byoc/main/cloud_settings/aws_cloud_settings/manage_aws_network_configurations)
- [Manage data credentials for Azure](https://docs.celerdata.com/byoc/main/cloud_settings/azure_cloud_settings/manage_azure_data_credentials)
- [Manage deployment credentials for Azure](https://docs.celerdata.com/byoc/main/cloud_settings/azure_cloud_settings/manage_azure_deployment_credentials)
- [Manage network configurations for Azure](https://docs.celerdata.com/byoc/main/cloud_settings/azure_cloud_settings/manage_azure_network_configurations)
